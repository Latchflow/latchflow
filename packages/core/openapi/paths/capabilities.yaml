capabilities:
  get:
    summary: List registered trigger/action capabilities
    operationId: listCapabilities
    tags: [Capabilities]
    security:
      - cookieAdmin: []
    parameters:
      - in: query
        name: kind
        schema: { type: string, enum: [TRIGGER, ACTION] }
      - in: query
        name: key
        schema: { type: string }
        description: Substring match against capability key
      - in: query
        name: pluginId
        schema: { type: string, format: uuid }
      - in: query
        name: enabled
        schema: { type: boolean }
      - in: query
        name: limit
        schema: { type: integer, minimum: 1, maximum: 200, default: 50 }
      - in: query
        name: cursor
        schema: { type: string }
        description: Opaque pagination cursor
    responses:
      '200':
        description: Capability registry
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items: { $ref: ../components/schemas/Capability.yaml }
                nextCursor: { type: string }
              required: [items]
      '401': { $ref: ../components/responses/Unauthorized.yaml }
